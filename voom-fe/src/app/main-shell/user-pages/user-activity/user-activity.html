<div class="px-16 py-4">
  <div class="flex justify-between items-center">
    <div class="font-medium text-3xl">Activity</div>
    <div class="flex items-center space-x-8">
      <mat-icon class="scale-150 cursor-pointer">filter_list</mat-icon>
      <app-value-input-date label="From" [formControl]="fromDate"></app-value-input-date>
      <app-value-input-date label="To" [formControl]="toDate"></app-value-input-date>
    </div>
  </div>
  @if (userRideHistory(); as history) {
    @if (history.length !== 0) {
      @for (ride of history; track ride.id) {
        <mat-expansion-panel hideToggle>
          <mat-expansion-panel-header>
            <mat-panel-title class="flex items-center justify-between">
              <div class="flex items-center space-x-4">
                <div class="text-lg font-normal">{{ getParsedTime(ride.rideRequest.scheduledTime) }}</div>
              </div>
              <div class="flex items-center space-x-4">
                @for (routePoint of ride.rideRoute.routePoints; track $index) {
                  <div class="text-lg font-normal">{{ routePoint.address }}</div>
                  <mat-icon>arrow_forward</mat-icon>
                }
              </div>
              <div class="flex items-center space-x-4">
                <div class="text-lg font-normal">{{ ride.rideRequest.creator.person.firstName + ' ' + ride.rideRequest.creator.person.lastName }}</div>
                <img src="assets/icons/free%20driver.png" alt="" class="w-8 h-8" />
              </div>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="flex items-center justify-between pt-8 px-4">
            <div class="flex items-center justify-center space-x-2">
              <div class="text-lg font-normal">Price:</div>
              <div class="text-lg font-normal">$ {{ ride.rideRequest.calculatedPrice }}</div>
            </div>
            <div class="flex items-center justify-center space-x-2">
              <div class="text-lg font-normal">Distance:</div>
              <div class="text-lg font-normal">{{ ride.rideRequest.rideRoute.totalDistanceKm }} km</div>
            </div>
            <div class="flex items-center justify-center space-x-2">
              <div class="text-lg font-normal">Vehicle type:</div>
              <div class="text-lg font-normal">{{ ride.rideRequest.vehicleType.type.toLowerCase() }}</div>
            </div>
            <button matButton="outlined" (click)="openMap(ride)">Open route</button>
          </div>
        </mat-expansion-panel>
      }
    } @else {
      <div class="py-8">
        <div class="text-center text-xl">No activity found yet</div>
      </div>
    }
  }
</div>
