<div class="reports-container">
  <mat-card class="filter-card">
    <div class="filter-content">
      <mat-form-field
        appearance="outline"
        class="date-field"
        [color]="isInvalidRange() ? 'warn' : 'primary'"
      >
        <mat-label>From</mat-label>
        <input
          matInput
          [matDatepicker]="fromPicker"
          [(ngModel)]="fromDate"
          [ngClass]="{ 'invalid-date': isInvalidRange() }"
        />
        <mat-datepicker-toggle matSuffix [for]="fromPicker"></mat-datepicker-toggle>
        <mat-datepicker #fromPicker></mat-datepicker>

        <mat-error *ngIf="isInvalidRange()"> Invalid date range </mat-error>
      </mat-form-field>

      <mat-form-field
        appearance="outline"
        class="date-field"
        [color]="isInvalidRange() ? 'warn' : 'primary'"
      >
        <mat-label>To</mat-label>
        <input
          matInput
          [matDatepicker]="toPicker"
          [(ngModel)]="toDate"
          [ngClass]="{ 'invalid-date': isInvalidRange() }"
        />
        <mat-datepicker-toggle matSuffix [for]="toPicker"></mat-datepicker-toggle>
        <mat-datepicker #toPicker></mat-datepicker>

        <mat-error *ngIf="isInvalidRange()"> Invalid date range </mat-error>
      </mat-form-field>

      <button
        mat-raised-button
        color="primary"
        class="generate-btn"
        (click)="loadReports()"
        [disabled]="!fromDate || !toDate || isInvalidRange() || isSuspended()"
      >
        Generate Report
      </button>
    </div>
  </mat-card>

  <div class="summary-grid">
    <mat-card class="summary-card">
      <h3>Total rides</h3>
      <p>{{ summary.totalRides }}</p>
    </mat-card>

    <mat-card class="summary-card">
      <h3>Total km</h3>
      <p>{{ summary.totalKm | number: '1.2-2' }} km</p>
    </mat-card>

    <mat-card class="summary-card">
      <h3>
        {{ isDriver ? 'Total earnings' : 'Total expenses' }}
      </h3>

      <p>{{ summary.totalMoney | currency }}</p>
    </mat-card>

    <mat-card class="summary-card">
      <h3>Average per day</h3>
      <p>{{ summary.averageMoney | currency }}</p>
    </mat-card>
  </div>

  <div class="charts-grid">
    <mat-card class="chart-card full-width">
      <h3>Rides per day</h3>
      <div class="chart-wrapper">
        <canvas
          baseChart
          [data]="ridesChartData"
          [options]="chartOptions"
          [legend]="true"
          chartType="line"
        >
        </canvas>
      </div>
    </mat-card>

    <mat-card class="chart-card">
      <h3>Kilometers per day</h3>
      <div class="chart-wrapper">
        <canvas baseChart [data]="kmChartData" [legend]="true" chartType="bar"> </canvas>
      </div>
    </mat-card>

    <mat-card class="chart-card">
      <h3>
        {{ isDriver ? 'Earnings per day' : 'Expenses per day' }}
      </h3>
      <div class="chart-wrapper">
        <canvas baseChart [data]="moneyChartData" [legend]="true" chartType="line"> </canvas>
      </div>
    </mat-card>
  </div>
</div>
